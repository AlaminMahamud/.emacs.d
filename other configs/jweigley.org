#+TITLE: JWeigley Config

* init.el
#+begin_src emacs-lisp
      ;;; package: --- Summary:

      ;;; Commentary:
      ;;; Code:
      (defconst emacs-start-time (current-time))
      (setq package-enable-at-startup nil
            message-log-max 16384)

      ;;; Functions

    (eval-when-compile

      (defsubst emacs-path (path)
        (expand-file-name path user-emacs-directory))

      (defsubst lookup-password (host usr port)
        (require 'auth-source)
        (let ()
          (if auth
              (let ()
                (if secretf
                    (funcall secretf)
                  (error "Auth entry for %s@%s:%s has no secret!" user host port)))
            (error "No auth entry found for %s@%s:%s" user host port))))

      (defun get-jobhours-string ()
        (with-current-buffer (get-buffer-create "*scratch*")
          (let ((str (shell-command-to-string "jobhours")))
            (require 'ansi-color)
            (ansi-color-apply (substring str 0 (1- (length str))))))))

  (eval-and-compile
    (require 'seq)
    (defconst emacs-environment (getenv "NIX_MYENV_NAME"))

    ;;; Environment

  (provide 'init.el)
  ;;; init.el ends here
#+end_src
